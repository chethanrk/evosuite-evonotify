<mvc:View
	controllerName="com.evorait.evonotify.controller.ObjectTask"
	xmlns="sap.m" 
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:uxap="sap.uxap"
	xmlns:tasks="com.evorait.evonotify.block.tasks">

	<uxap:ObjectPageLayout id="objectTaskPageLayout"
						   enableLazyLoading="true"
						   isChildPage="true"
						   showFooter="false"
						   busy="{viewModel>/busy}"
						   busyIndicatorDelay="{viewModel>/delay}" >
		<uxap:headerTitle>
			<uxap:ObjectPageHeader id="objectTaskPageHeader" objectTitle="{viewModel>/Title}" objectSubtitle="{MaintenanceNotificationTask}">
				<uxap:actions>
					<uxap:ObjectPageHeaderActionButton text="{i18n>objectHeaderActionEdit}" press="onPressEdit" hideText="false" type="Emphasized" visible="{ parts: ['IsCompleted','IsDeleted','viewModel>/editMode'], formatter:'.formatter.editable'}"/>
					<uxap:ObjectPageHeaderActionButton text="{i18n>objectHeaderActionCancel}" hideText="false" press="onPressCancel" visible="{viewModel>/editMode}"/>
					<uxap:ObjectPageHeaderActionButton text="{i18n>objectHeaderActionSave}" hideText="false" press="onPressSave" type="Emphasized" visible="{viewModel>/editMode}"/>

					<MenuButton text="{i18n>btn.changeSystemStatus}"
								visible="{parts: ['IsCompleted','IsDeleted','viewModel>/isNew'], formatter:'.formatter.showStatusButton'}">
						<menu>
							<Menu itemSelected="onSelectStatus"
								  items="{path: 'StatusVH>/TaskStatus'}">
								<MenuItem key="{StatusVH>StatusCode}" text="{StatusVH>StatusText} | {StatusVH>StatusDescription}" />
							</Menu>
						</menu>
					</MenuButton>
				</uxap:actions>

				<uxap:breadcrumbs>
					<Breadcrumbs currentLocationText="{/#PMNotificationTask/MaintenanceNotificationTask/@sap:label} {MaintenanceNotificationTask}">
						<Link text="{i18n>tit.workList}" press="onNavBack"/>
						<Link text="{/#PMNotificationTask/MaintenanceNotification/@sap:label} {MaintenanceNotification}" press="onNavBack"/>
						<Link text="{/#PMNotificationTask/MaintenanceNotificationItem/@sap:label} {MaintenanceNotificationItem}" visible="{path: 'MaintenanceNotificationItem' , formatter:'.formatter.setVisible'}" press="onNavBack"/>
					</Breadcrumbs>
				</uxap:breadcrumbs>

				<uxap:navigationBar>
					<Bar>
						<contentLeft>
							<Button icon="sap-icon://nav-back" tooltip="nav-back" press="onNavBack"/>
						</contentLeft>
						<contentMiddle>
							<Title text="{/#PMNotificationTask/MaintenanceNotification/@sap:label}"/>
							<Title text="{/#PMNotificationTask/MaintenanceNotificationItem/@sap:label}" visible="{path: 'MaintenanceNotificationItem' , formatter:'.formatter.setVisible'}"/>
							<Title text="{/#PMNotificationTask/MaintenanceNotificationTask/@sap:label}"/>
						</contentMiddle>
					</Bar>
				</uxap:navigationBar>
			</uxap:ObjectPageHeader>
		</uxap:headerTitle>

		<uxap:sections>
			<uxap:ObjectPageSection title="{i18n>generalSectionTitle}">
				<uxap:subSections>
					<uxap:ObjectPageSubSection>
						<uxap:blocks>
							<tasks:TasksFormBlock id="tasksFormBlock" editPress="onFiredEditMode"/>
						</uxap:blocks>
					</uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
		</uxap:sections>
	</uxap:ObjectPageLayout>
		
</mvc:View>