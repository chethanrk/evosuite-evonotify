<mvc:View height="100%" 
	controllerName="com.evorait.evolite.evonotify.controller.Object" 
	xmlns="sap.m" 
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core" 
	xmlns:uxap="sap.uxap"
	xmlns:details="com.evorait.evolite.evonotify.block.details"
	xmlns:items="com.evorait.evolite.evonotify.block.items"
	xmlns:tasks="com.evorait.evolite.evonotify.block.tasks"
	xmlns:activities="com.evorait.evolite.evonotify.block.activities"
	xmlns:layout="sap.ui.layout">
	
	<Page title="{i18n>objectViewTitle}" class="sapUiNoContentPadding" showNavButton="true" navButtonPress="onNavBack" floatingFooter="false">
		
		<uxap:ObjectPageLayout id="ObjectPageLayout" enableLazyLoading="false" busy="{objectView>/busy}" busyIndicatorDelay="{objectView>/delay}" >
			<uxap:headerTitle>
				<uxap:ObjectPageHeader id="objectPageHeader" objectTitle="{objectView>/Title}" objectSubtitle="{MaintenanceNotification}">
					<uxap:actions>
						<uxap:ObjectPageHeaderActionButton icon="sap-icon://edit" press="onPressEdit" type="Emphasized" visible="{objectView>/editable}"/>
						<uxap:ObjectPageHeaderActionButton icon="sap-icon://cancel" press="onPressCancel" visible="{objectView>/editMode}"/>
						<uxap:ObjectPageHeaderActionButton icon="sap-icon://save" press="onPressSave" type="Emphasized" visible="{objectView>/editMode}"/>
					</uxap:actions>
				</uxap:ObjectPageHeader>
			</uxap:headerTitle>
			
			<uxap:headerContent>
				<layout:VerticalLayout>
					<layout:layoutData>
						<uxap:ObjectPageHeaderLayoutData
							showSeparatorAfter="false"/>
					</layout:layoutData>
					<ObjectStatus title="{/#PMNotification/NotificationType/@sap:label}" text="{NotificationTypeName}" visible="{objectView>/isEdit}" />
					<ObjectStatus title="{/#PMNotification/MaintenanceOrder/@sap:label}" text="{MaintenanceOrder}" visible="{objectView>/isEdit}" />
					<ObjectStatus title="{/#PMNotification/MaintPriority/@sap:label}" text="{MaintPriorityText}" visible="{objectView>/isEdit}" />
					<ObjectStatus title="{/#PMNotification/MaintenanceObjectIsDown/@sap:label}" text="{MaintenanceObjectIsDown}" visible="{objectView>/isEdit}" state="Error"/>
				</layout:VerticalLayout>
				<layout:VerticalLayout>
					<layout:layoutData>
						<uxap:ObjectPageHeaderLayoutData
							showSeparatorAfter="false"/>
					</layout:layoutData>
					<ObjectStatus title="Technical Object" text="{TechnicalObjectLabel}" visible="{objectView>/isEdit}" />
					<ObjectStatus title="Technical Object Type" text="{TechObjIsEquipOrFuncnlLocDesc}" visible="{objectView>/isEdit}" />
					<ObjectStatus title="{/#PMNotification/Assembly/@sap:label}" text="{AssemblyName}" visible="{objectView>/isEdit}" />
				</layout:VerticalLayout>
				<layout:VerticalLayout>
					<layout:layoutData>
						<uxap:ObjectPageHeaderLayoutData
							showSeparatorAfter="false"/>
					</layout:layoutData>
					<ObjectStatus title="System Status" text="{ConcatenatedActSysStsName}" visible="{objectView>/isEdit}" />
					<ObjectStatus title="User Status" text="{ConcatenatedActUserStsName}" visible="{objectView>/isEdit}" />
				</layout:VerticalLayout>
			</uxap:headerContent>
			
			<uxap:sections>
				<uxap:ObjectPageSection title="{i18n>generalSectionTitle}">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<details:DetailsFormBlock id="detailsForm" editPress="onFiredEditMode"/>
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
				
				<uxap:ObjectPageSection id="itemsSection" title="{i18n>itemsTitle}" visible="{objectView>/isEdit}">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<items:ItemsTableBlock id="itemsTable" itemPress="onPressItem"/>
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
				
				<uxap:ObjectPageSection title="{i18n>tasksTitle}" visible="{objectView>/isEdit}">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<tasks:TasksTableBlock id="taskTable" itemPress="onPressTask"/>
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
				
				<uxap:ObjectPageSection title="{i18n>activitiesTitle}" visible="{objectView>/isEdit}">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<activities:ActivitiesTableBlock itemPress="onPressActivity"/>
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
			</uxap:sections>
		</uxap:ObjectPageLayout>
		
		<footer>
			<Toolbar>
				<content>
					<ToolbarSpacer />
					<Button icon="sap-icon://add" text="{i18n>newNotificationItemTitle}" press="onAddItemPress" visible="{objectView>/showAdd}" />
				</content>
			</Toolbar>
		</footer>
	</Page>
</mvc:View>