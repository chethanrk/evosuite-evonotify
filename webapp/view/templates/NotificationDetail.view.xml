<mvc:View controllerName="com.evorait.evonotify.controller.NotificationDetail" xmlns="sap.m" xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc" xmlns:uxap="sap.uxap" xmlns:layout="sap.ui.layout" xmlns:smartField="sap.ui.comp.smartfield"
	xmlns:items="com.evorait.evonotify.block.items" xmlns:tasks="com.evorait.evonotify.block.tasks"
	xmlns:activities="com.evorait.evonotify.block.activities" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1">
	<template:alias name=".AH" value="sap.ui.model.odata.AnnotationHelper">
		<uxap:ObjectPageLayout id="notificationDetailPage" enableLazyLoading="false" isChildPage="true" showFooter="false" busy="{viewModel>/busy}"
			busyIndicatorDelay="{viewModel>/delay}">
			<uxap:headerTitle>
				<uxap:ObjectPageHeader id="objectPageHeader" objectTitle="{Description}" objectSubtitle="{NotificationNo}">
					<uxap:actions>
						<uxap:ObjectPageHeaderActionButton id="editNotificationButton" text="{i18n>btn.edit}" hideText="false" press="onPressEdit" type="Emphasized"
							visible="{parts: ['ENABLE_NOTIFICATION_CHANGE','user>/ENABLE_NOTIFICATION_UPDATE','viewModel>/editMode'], formatter:'.formatter.isVisible'}"/>
						<uxap:ObjectPageHeaderActionButton id="cancelNotificationButton" text="{i18n>btn.cancel}" hideText="false" press="onPressCancel"
							visible="{viewModel>/editMode}"/>
						<uxap:ObjectPageHeaderActionButton id="saveNotificationButton" text="{i18n>btn.save}" hideText="false" press="onPressSave" type="Emphasized"
							visible="{viewModel>/editMode}"/>
						<MenuButton text="{i18n>btn.changeSystemStatus}"
							visible="{parts: ['ENABLE_NOTIFICATION_CHANGE','viewModel>/editMode'], formatter:'.formatter.showStatusButton'}">
							<menu>
								<Menu itemSelected="onMenuSelectionChange" items="{ path: '/FunctionsSet' }">
									<items>
										<MenuItem key="{Function}" text="{Description}"/>
									</items>
								</Menu>
							</menu>
						</MenuButton>
					</uxap:actions>
					<uxap:breadcrumbs>
						<Breadcrumbs currentLocationText="{/#PMNotification/NotificationNo/@sap:label} {NotificationNo}">
							<Link text="{i18n>tit.notifications}" press="onNavBack"/>
						</Breadcrumbs>
					</uxap:breadcrumbs>
					<uxap:navigationBar>
						<core:Fragment fragmentName="com.evorait.evonotify.view.fragments.SubPageHeader" type="XML"/>
					</uxap:navigationBar>
				</uxap:ObjectPageHeader>
			</uxap:headerTitle>
			<uxap:headerContent>
				<template:with path="meta>com.sap.vocabularies.UI.v1.HeaderFacets#notificationDetail" helper=".AH.resolvePath" var="headerFacet">
					<HBox width="100%">
						<template:repeat list="{headerFacet>}">
							<template:with path="headerFacet>Target" helper=".AH.resolvePath" var="target">
								<layout:VerticalLayout>
									<template:with path="target>Data" var="data">
										<template:repeat list="{data>}">
											<template:if test="{data>Org.OData.Core.V1.LongDescription}">
												<template:then>
													<ObjectStatus title="{= '{= ${' + ${path : 'data>Value/Path'} + '/##com.sap.vocabularies.Common.v1.Label/String} }' }"
														text="{path:'data>Org.OData.Core.V1.LongDescription',formatter:'.AH.format'} ({path:'data>Value',formatter:'.AH.format'})" active="false"
														state="None"/>
												</template:then>
												<template:else>
													<ObjectStatus title="{= '{= ${' + ${path : 'data>Value/Path'} + '/##com.sap.vocabularies.Common.v1.Label/String} }' }"
														text="{path:'data>Value',formatter:'.AH.format'}" active="false" state="None"/>
												</template:else>
											</template:if>
										</template:repeat>
									</template:with>
								</layout:VerticalLayout>
							</template:with>
						</template:repeat>
					</HBox>
				</template:with>
			</uxap:headerContent>
			<uxap:sections>
				<template:with path="meta>com.sap.vocabularies.UI.v1.Facets#notificationDetail" helper=".AH.resolvePath" var="sections">
					<template:repeat list="{sections>}">
						<template:if test="{:= (${sections>Org.OData.Core.V1.Description/String} === 'Form')}">
							<template:then>
								<uxap:ObjectPageSection title="{path:'sections>Label',formatter:'.AH.format'}">
									<uxap:subSections>
										<uxap:ObjectPageSubSection>
											<uxap:blocks>
												<template:with path="sections>Facets" var="facets">
													<core:Fragment fragmentName="com.evorait.evonotify.view.templates.SmartFormTemplate" type="XML"/>
												</template:with>
											</uxap:blocks>
										</uxap:ObjectPageSubSection>
									</uxap:subSections>
								</uxap:ObjectPageSection>
							</template:then>
							<template:elseif test="{:= (${sections>Org.OData.Core.V1.Description/String} === 'Table')}">
								<uxap:ObjectPageSection title="{path:'sections>Label',formatter:'.AH.format'}" visible="{= !${viewModel>/editMode}}">
									<uxap:subSections>
										<uxap:ObjectPageSubSection>
											<uxap:blocks>
												<template:if test="{:= (${sections>Org.OData.Core.V1.LongDescription/String} === 'Tasks')}">
													<template:then>
														<tasks:TasksBlock/>
													</template:then>
													<template:elseif test="{:= (${sections>Org.OData.Core.V1.LongDescription/String} === 'Items')}">
														<items:ItemsBlock/>
													</template:elseif>
													<template:elseif test="{:= (${sections>Org.OData.Core.V1.LongDescription/String} === 'Activities')}">
														<activities:ActivitiesBlock/>
													</template:elseif>
												</template:if>
											</uxap:blocks>
										</uxap:ObjectPageSubSection>
									</uxap:subSections>
								</uxap:ObjectPageSection>
							</template:elseif>
						</template:if>
					</template:repeat>
				</template:with>
			</uxap:sections>
		</uxap:ObjectPageLayout>
	</template:alias>
</mvc:View>