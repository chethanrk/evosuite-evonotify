<mvc:View
	controllerName="com.evorait.evolite.evonotify.controller.ObjectItem"
	xmlns="sap.m" 
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:semantic="sap.m.semantic" 
	xmlns:form="sap.ui.layout.form" 
	xmlns:core="sap.ui.core" 
	xmlns:uxap="sap.uxap"
	xmlns:items="com.evorait.evolite.evonotify.block.items"
	xmlns:causes="com.evorait.evolite.evonotify.block.causes"
	xmlns:tasks="com.evorait.evolite.evonotify.block.tasks">

	<Page title="{i18n>itemViewTitle}" class="sapUiNoContentPadding" showNavButton="true" navButtonPress="onNavBack">
		
		<uxap:ObjectPageLayout id="ObjectPageLayout" enableLazyLoading="false" busy="{objectView>/busy}" busyIndicatorDelay="{objectView>/delay}" >
			<uxap:headerTitle>
				<uxap:ObjectPageHeader objectTitle="{objectView>/Title}" objectSubtitle="{MaintenanceNotificationItem}">
					<uxap:actions>
						<uxap:ObjectPageHeaderActionButton icon="sap-icon://edit" press="onPressEdit" type="Emphasized" visible="{objectView>/showMode}"/>
						<uxap:ObjectPageHeaderActionButton icon="sap-icon://cancel" press="onPressCancel" visible="{objectView>/editMode}"/>
						<uxap:ObjectPageHeaderActionButton icon="sap-icon://save" press="onPressSave" type="Emphasized" visible="{objectView>/editMode}"/>
					</uxap:actions>
				</uxap:ObjectPageHeader>
			</uxap:headerTitle>
			
			<uxap:headerContent></uxap:headerContent>
			
			<uxap:sections>
				<uxap:ObjectPageSection title="General">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<items:ItemsFormBlock id="itemsForm" editPress="onFiredEditMode"/>
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
				
				<uxap:ObjectPageSection title="Causes" visible="{objectView>/isEdit}">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<causes:CausesTableBlock itemPress="onPressCause"/>
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
				
				<uxap:ObjectPageSection title="Tasks" visible="{objectView>/isEdit}">
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<uxap:blocks>
								<Table width="auto" class="sapUiNoMargin"
									items="{path : 'to_PMNotificationItemTask',
							                sorter : {
							                    path : 'MaintenanceNotificationTask',
							                    descending : false
							                }}"
									noDataText="{objectView>/tableNoDataText}"
									busyIndicatorDelay="{objectView>/tableBusyDelay}"
									growing="false"
									growingScrollToLoad="false">
									<columns>
										<Column>
											<Text text="{/#PMNotificationTask/MaintenanceNotificationTask/@sap:label}"/>
										</Column>
										<Column>
											<Text text="{/#PMNotificationTask/MaintNotifTaskCodeGroup/@sap:label}"/>
										</Column>
										<Column>
											<Text text="{/#PMNotificationTask/MaintNotifTaskCode/@sap:label}"/>
										</Column>
										<Column>
											<Text text="{/#PMNotificationTask/ResponsiblePerson/@sap:label}"/>
										</Column>
									</columns>
									<items>
										<ColumnListItem type="Navigation" press="onPressTask">
											<cells>
												<ObjectIdentifier 
												title="{MaintenanceNotificationTask}"
												text="{MaintNotifTaskText}"/>
												<Text text="{MaintNotiTtaskCodeGroupName} ({MaintNotifTaskCodeGroup})"/>
												<Text text="{MaintNotifTaskCodeName} ({MaintNotifTaskCode})"/>
												<Text text="{ResponsiblePersonName} ({ResponsiblePerson})"/>
											</cells>
										</ColumnListItem>
									</items>
								</Table>
								<!--<tasks:TasksTableBlock itemPress="onPressTask" />-->
							</uxap:blocks>
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>
			</uxap:sections>
		</uxap:ObjectPageLayout>
		
	</Page>
</mvc:View>