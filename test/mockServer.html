<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Notification Board</title>
 
 
	<!-- Bootstrap the UI5 core library -->
	<script id="sap-ui-bootstrap"
			src="../resources/sap-ui-core.js"
			data-sap-ui-libs="sap.m"
			data-sap-ui-theme="sap_belize"
			data-sap-ui-compatVersion="edge"
			data-sap-ui-preload="async"
			data-sap-ui-resourceroots='{
				"com.evorait.evolite.evonotify": "../"
			}'
			data-sap-ui-frameOptions='allow'>    // NON-SECURE setting for testing environment
	</script>
	<script type="text/javascript" src="cordova.js"></script>
	
	<script type="text/javascript">
	  /*=====================================================================
	   The following onError function is used to trap any errors that occur
	   while the application is running. Cordova fails silently whenever it
	   encounters an error in HTML or JavaScript code. So, with that being
	   the case, developers cannot tell when/why their applications are
	   failing. Any code error will cause the function to fire and display
	   the error in an alert dialog.
	   ======================================================================*/
	  window.onerror = function(msg, url, line) {
		var idx = url.lastIndexOf("/");
		if (idx > -1) {
		  url = url.substring(idx + 1);
		}
		alert("ERROR in " + url + " (line #" + line + ")\n" + msg);
		console.error(msg);
		return false;
	  };
	</script>
 
	<script>
		function getUrlParameterName(sParam){
			var sPageURL = window.location.search.substring(1);
			var sURLVariables = sPageURL.split('&');
			for (var i = 0; i < sURLVariables.length; i++) 
			{
				var sParameterName = sURLVariables[i].split('=');
				if (sParameterName[0] == sParam) 
				{
					return true;
				}
			}
			return false;
		} 
		
		function startApp() {
			sap.ui.require([
				"com/evorait/evolite/evonotify/localService/mockserver",
				"sap/m/Shell",
				"sap/ui/core/ComponentContainer"
			], function (mockserver, Shell, ComponentContainer) {
				// set up test service for local testing
				mockserver.init();
				// initialize the shell
				new Shell({
					app: new ComponentContainer({
						height: "100%",
						name: "com.evorait.evolite.evonotify"
					})
				}).placeAt("content");
			});
		}
		
		window.onload = function() {
			jQuery.sap.require("com.evorait.evolite.evonotify.dev.devapp");
			if (window.cordova || getUrlParameterName("companionbuster")) {
				var page = window.location.pathname.split("/").pop();
                if(page === "preview_hidden.html") {
                    window.sap_webide_FacadePreview = true;
                }
				com.evorait.evolite.evonotify.dev.devapp.initialize();
			}
			else {
				startApp();
			}
		}
	</script>
 
</head>
 
<!-- UI Content -->
<body class="sapUiBody" id="content">
</body>
</html>